# 第2条 选择适当的Go语言版本

## 2.1 Go语言的先祖

和绝大多数编程语言相似，Go语言也是“站在巨人的肩膀上”。Go的基本语法参考了C语言，Go是“C家族语言”的一个分支。而Go的声明语法、包概念则收到了Pascal、Modula、Oberon的启发；一些并发的思想则来自受到Tony Hoare教授CSP理论影响的编程语言，如Newsqueak和Limbo。

## 2.2 Go语言的版本发布历史

2009年11月10日，Go语言正式对外发布并开源。之后，Go语言在一段时间内采用了Weekly Release模式，即每周发布一个版本。

2011年3月7日开始，除了Weekly Release，Go项目还会每月发布一次，即Monthly Release。这种情况一致延续到Go 1.0版本发布之前

2021年3月28日，Go 1.0正式发布。同时Go发布了“Go1兼容性承诺”：只要符合Go1语言规范的源代码，Go编译器将保证向后兼容(backwards compatible)，即用新版编译器可以正确编译使用老版本语法编写的代码。

2023年5月13日，Go 1.1版本发布，其主要的变动点为：

- 新增method value语法：允许将方法绑定到一个特定的方法接受者(receiver)实例上，从而形成一个函数。
- 引入“终止语句”概念
- 将int类型在64位平台上的内部表示的字节数升为8字节，即64比特
- 更为精确的堆垃圾回收器（Heap GC），尤其针对32位平台

2013年12月1日，Go 1.2版本发布。从Go1.2开始，Go开发组启动了以每6个月为一个发布周期的发布计划。Go1.2主要变动点为：

- 增加全切片表达式（Full slice expression）：a[low:high:max]
- 实现了在部分场景下支持抢占的goroutine调度器（利用在函数入口插入的调度器代码）
- go test新增-cover标志，用于计算测试覆盖率

2014年12月10日，Go 1.4版本发布。Go 1.4也是最后一个编译器和运行时由C语言实现的版本。变动点：

- 新增for range x {...}形式的for-range语法；
- 使用Go语言替换运行时的部分C语言实现，这使GC变得全面精确；
- 由于连续栈的应用，goroutine的默认栈大小从8kB减小为2kB；
- 增加internal package机制；增加canonical import path机制；
- 新增go generate子命令，用于辅助实现代码生成；
- 删除Go源码树中的src/pkg/xxx中的pkg这一级别，直接使用src/xxx

2015年8月19日，Go1.5版本发布。Go1.5是Go语言历史上的一个具有里程碑意义的重要版本。因为从这个版本开始Go实现了自举：即无需再依赖C编译器。然而Go编译器的性能比Go1.4的C实现有了较大幅度的下降。主要变动点包括：

- Go编译器和运行时全部使用Go重写，原先的C代码实现被彻底移除。
- 跨平台编译Go程序更为简洁，只需设置两个环境变量——GOARCH和GOOS即可；
- 支持map类型字面量（literal）；
- GOMAXPROCS的初始默认值由1改为运行环境的CPU核数；
- 大幅度优化GC延迟，在多数情况下GC停止世界（Stop The World）的时间短于10ms；
- 增加vendor机制，改善Go包依赖管理；
- 增加go tool trace子命令；
- go build增加-buildmode命令选项，支持将Go代码编译为共享库（shared library）的形式

更多历史等等...

## 2.3 Go语言的版本选择建议

如今，Go团队将发布节奏稳定在每年发布两次大版本上，一般在2月和8月。Go团队承诺对最新的两个Go稳定大版本提供支持，比如：最新版本是Go1.16，那么Go团队会为Go1.16和Go1.15版本提供支持。如果Go1.17发布，那么Go团队会为Go1.17和Go1.16版本提供支持。支持范围主要包括：重大问题、文档变更及安全问题更新等。

Go开发团队一直”**建议大家使用最新的发布版**“。

kubernetes一直用最新版，但是Docker一般会用两个发布周期之前的版本，如当前是1.16，Docker使用1.14版本。

