---
title: 升哲科技
---

#### 1、python多进程、多线程、协程，gil，100个请求怎么用50个线程跑

>进程：程序的一次执行过程被成为进程，是内存分配的最小单位
>
>线程：进程由若干个线程组成，且最少有一个线程，是CPU调度的最小单位
>
>协程：微线程，切换受代码控制

#### 2、tornado跟django的对比，tornado为什么这么快

>tornado是协程，django是线程

#### 3、设计模式，知道的设计模式有哪些，怎么使用？

>单例
>
>工厂
>
>MTV
>
>修饰器模式

#### 4、单例模式怎么用，使用场景？

>控制一个类只会产生一个对象，通常用于数据库连接

#### 5、数据库连接池的概念

>数据库连接池的主要优点如下：
>
>1. **减少连接开销**：建立和关闭数据库连接是一个相对耗时的操作。通过使用连接池，应用程序可以在多个请求之间复用已建立的连接，从而减少了频繁建立和关闭连接的开销。
>2. **提高响应速度**：由于连接池中的连接已经建立好，应用程序可以快速地从连接池中获取连接，从而提高了响应速度。
>3. **提高资源利用率**：连接池可以限制同时打开的数据库连接数量，避免过多的连接占用系统资源。此外，连接池还可以根据需要动态地增加或减少连接数量，以满足应用程序的需求。
>4. **方便管理**：连接池提供了统一的管理接口，可以方便地对连接进行监控、统计和调优。
>
>数据库连接池的主要组件包括：
>
>- **连接池管理器**：负责创建、管理和维护连接池中的连接。
>- **连接池配置**：定义连接池的各种参数，如最大连接数、最小连接数、连接超时时间等。
>- **连接对象**：表示一个数据库连接，封装了与数据库交互的方法。

#### 6、进程池

>多进程共享某个消息队列，从队列中消费消息处理

```python
import multiprocessing

def square(n):
    return n * n

if __name__ == "__main__":
    # 创建一个包含4个进程的进程池
    with multiprocessing.Pool(processes=4) as pool:
        # 创建一个包含10个数字的列表
        numbers = list(range(1, 11))
        
        # 使用map函数并行计算每个数字的平方
        results = pool.map(square, numbers)
        
        print(results)
```

#### 7、除了mysql，mongo，redis三种数据库还用过哪些，优缺点是什么

>sqlite，轻量级，并发支持很弱

#### 8、nginx负载均衡

> ###### 负载均衡原理
>
> 负载均衡是将客户端请求分发到多个后端服务器上，以提高系统的吞吐量、可用性和稳定性。Nginx通过反向代理的方式实现负载均衡，将客户端的请求转发给后端服务器，并将服务器的响应返回给客户端。
>
> ###### Nginx负载均衡配置
>
> Nginx支持多种负载均衡算法，包括轮询（Round Robin）、加权轮询（Weighted Round Robin）、IP哈希（IP Hash）等。以下是一个简单的Nginx负载均衡配置示例：
>
> ```nginx
> http {
>     upstream backend {
>         server backend1.example.com;
>         server backend2.example.com;
>         server backend3.example.com;
>     }
> 
>     server {
>         listen 80;
> 
>         location / {
>             proxy_pass http://backend;
>         }
>     }
> }
> ```
>
> ###### 负载均衡算法
>
> 1. **轮询（Round Robin）**：按照顺序将请求分发到后端服务器。当所有服务器都处理完请求后，再次从第一个服务器开始分发。
> 2. **加权轮询（Weighted Round Robin）**：根据后端服务器的性能分配权重，按照权重将请求分发到后端服务器。权重越大的服务器处理的请求越多。
> 3. **IP哈希（IP Hash）**：根据客户端的IP地址计算哈希值，将相同IP地址的请求分发到同一个后端服务器。这样可以确保同一客户端的请求总是被分发到同一个服务器，有助于解决会话保持问题。

#### 9、mysql使用在项目中怎么使用的？mysql索引怎么设计的，数据量大怎么分库分表，数据最多的多少

>B+树，联合索引，自增为主键索引，char和varchar的区别，
>
>按照日期分库分表，
>
>或者地域，用户ID之类的信息

#### 10、根据日期查询的时候怎么查，比如查5个月，数据在5张表中？

>通过中间件对数据查询请求进行切分，比如数据落库时根据time字段识别该数据应该落在哪里，查询时根据传入的time区间对查询做拆分。
>
>- ShardingSphere：开源的分布式数据库中间件，支持分库分表、读写分离、分布式事务等功能。适用于Java等应用，由Sharding-JDBC、Sharding-Proxy和Sharding-Sidecar三个主要组件组成
>- MyCAT：基于Java编写的开源分布式数据库中间件，支持MySQL协议，可以作为MySQL的代理服务器使用。支持分库分表、读写分离、全局序列号等功能，具有跨语言、跨平台、跨数据库的通用性
>- Vitess：由YouTube开发的开源分布式数据库中间件，主要用于解决大规模MySQL集群的管理和扩展问题。提供了数据分片、读写分离、水平扩展等功能，具有强大的负载均衡和故障恢复能力
>- TDDL (淘宝分布式数据层)：阿里巴巴集团内部开发的分布式数据库中间件，设计目标是解决在电商业务中遇到的大规模数据、和高并发请求问题。后续升级为DRDS
>- **Atlas**：由360公司开发的开源MySQL数据库中间件，可以实现MySQL数据库的水平扩展、和高可用性。支持分库分表，以及还支持读写分离

#### 11、redis在项目中怎么用的，底层实现原理

>缓存。
>
>string，list，hash，set，zset，布隆过滤器，队列等。各数据结构的底层实现？

#### 12、redis的持久化

>RDB：快照
>
>AOF：命令追加

#### 13、redis怎么监听挂了没

>哨兵，ElasticSearch采用类似的机制

#### 14、mongo在项目中的使用

>优势：非关系型数据库，数据按照文档行存储，存储不确定数据结构的场景

#### 15、rabitmq使用场景，为什么选择，有没有更好的

>削峰填谷，单播广播
>
>kafka等

